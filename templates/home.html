<!doctype html>
<html>
<head>
  <title>Shorten It</title>
  <link rel=stylesheet type=text/css href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class='main'>
    <div>
      <input id='url-input'>
      <button onclick='submitURL();'>Shorten It</button>
    </div>
  </div>

  <script type="text/javascript">
function submitURL() {
    var xmlhttp;
    xmlhttp = new XMLHttpRequest();

    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == XMLHttpRequest.DONE ) {
           if(xmlhttp.status == 200){
               resp = JSON.parse(xmlhttp.responseText);
               alert(resp.redirect)
           }
           else if(xmlhttp.status == 400) {
              alert('There was an error 400')
           }
           else {
               alert('something else other than 200 was returned')
           }
        }
    }
    long_url = document.getElementById('url-input').value
    xmlhttp.open("POST", "shorten", true);
    xmlhttp.send(JSON.stringify({url: long_url}));
}


</script>

</body>

</html>
